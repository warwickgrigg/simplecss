// Modern container responsive grid (.grid) with .flexgrid fallback for IE11

// Inspired by https://moderncss.dev/container-query-solutions-with-css-grid-and-flexbox/

@import "variables.scss"

$grid-min: 20rem

\:root
  --grid-min: #{$grid-min}
  --spacer: #{$spacer}
  --grid-gap: #{2 * $spacer}

// Modern CSS grid (.grid), eg. for Chrome, FF, Edge  not IE 10/11

@supports (display: grid) 
  .grid
    /* autoprefixer grid: off */
    display: grid
    grid-gap: var(--grid-gap)
    grid-template-columns: repeat(auto-fit, minmax(var(--grid-min), 1fr))

// Flex grid (.flexgrid). On IE11 .grid will fallback to this.

@mixin flexgrid()  
  display: flex
  flex-wrap: wrap
  margin-left: calc(var(--grid-gap) / -2 ) !important // counteract item margin
  margin-right: calc(var(--grid-gap) / -2 ) !important // counteract item margin

  // default is "pancake" break (refer to link)

  > *
    flex-shrink: 1
    flex-grow: 1
    flex-basis: var(--grid-min)
    margin: calc(var(--grid-gap) / 2 ) // simulated grid gap
  
  // "albatross" break (refer to link)

  &.albatross > *
    flex-basis: calc((var(--grid-min)  - 100%) * 999)

@media only screen and (-ms-high-contrast: active), (-ms-high-contrast: none) // IE11
  .grid
    @include flexgrid()

.flexgrid
  @include flexgrid()

.flex--auto 
  flex: 0 1 auto

.flex
  display: flex