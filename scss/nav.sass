/* autoprefixer grid: autoplace */

@import "./_variables.scss"

$nav-bg-color: $main-bg-color !default
$nav-fg-color: $black-0 !default
$nav-link-color: $blue-9 !default
$nav-active-color: $blue-9 !default
$nav-button-color: $main-bg-color !default

\:root
  --nav-bg-color: #{$nav-bg-color}
  --nav-fg-color: #{$nav-fg-color}
  --nav-link-color: #{$nav-link-color}
  --nav-active-color: #{$nav-active-color}
  --nav-button-color: #{$nav-button-color}

.navbar
  box-sizing: border-box
  display: grid
  grid-template-columns: repeat(3, 1fr)
  grid-template-rows: 2rem auto
  grid-template-areas: "title left right"
  line-height: 1 // reset
  color: var(--nav-fg-color)

  > *
    align-self: center
    outline: 1px solid red

  > .title
    grid-area: title

  > .burger
    grid-area: burger

  > .kebab
    grid-area: kebab
    justify-self: end

  > .left
    font-weight: 700
    grid-area: left
    display: flex

  > .right
    font-weight: 700
    grid-area: right
    display: flex
    justify-self: end

  a:not(.title),
  .button
    color: var(--nav-fg-color)

  .button
    font-size: 1rem
    padding: 0.75em

  .button,
  a:hover
    color: var(--nav-link-color)
    background: var(--nav-bg-color)

  *
    text-decoration: none
    white-space: nowrap

  input[type="checkbox"]
    display: none

  .left label
    padding: 0
    margin: 0

// Large

@media (min-width: 500px)
  .navbar
    .left > *,
    .right > *
      margin: 0 0.5rem

    .left > *
      padding: 0.75rem 0

    .left > *.active,
    .left > *:active
      border-bottom: 3px solid var(--nav-link-color)
      color: var(--nav-link-color)

    .absolute
      position: absolute

    .below
      display: none
      position: relative
      margin-top: 1.5rem
      left: -1rem
      z-index: 2
      background: var(--nav-bg-color)
      border: solid thin var(--nav-fg-color)
      border-radius: 0.5em

    .below.left5
      left: -6rem

    .below > *
      display: block
      margin: 1rem

    .submenu:hover .below
      display: block

  @media (hover: none)
    .navbar input:checked ~ div.absolute .below
      display: block

    .navbar input:checked + label:after
      content: url('data:image/svg+xmlutf8,<svg xmlns="http://www.w3.org/2000/svg" height="12" viewBox="0 0 24 24" width="12"><polygon points="4,19 20,19 12,5"/></svg>')

    .navbar input:not(:checked) + label:after
      content: url('data:image/svg+xmlutf8,<svg xmlns="http://www.w3.org/2000/svg" height="12" viewBox="0 0 24 24" width="12"><polygon points="4,5 20,5 12,19"/></svg>')

// Small

@media (max-width: 499px)
  .navbar
    // grid-template-columns: repeat(3, 1fr) // redundant?
    // grid-template-rows: 2.5em auto // redundant?
    grid-template-areas: "burger title kebab" "left left right"

    input.kebab:not(:checked) ~ .right,
    input.burger:not(:checked) ~ .left
      display: none

    > .title
      justify-self: center

    > .left,
    > .right
      flex-direction: column
      align-self: start

    .left > *,
    .right > *
      margin-bottom: 0.5rem

    .right *
      text-align: right

    .left .submenu,
    .left .below
      display: inline-flex
      flex-wrap: wrap

    .left > *.active,
    .left > *:active
      color: var(--nav-link-color)

    .below *:before
      content: "\00a0Â·\00a0"

    .burger:not(:checked) ~ label.burger:after
      content: url('data:image/svg+xmlutf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1z"/></svg>')

    .kebab:not(:checked) ~ label.kebab:after
      content: url('data:image/svg+xmlutf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>')

    .burger:checked ~ label.burger:after,
    .kebab:checked ~ label.kebab:after
      content: url('data:image/svg+xmlutf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"/></svg>')

//
  .nav a
    color: var(--nav-fg-color)

  .nav a:hover
    color: var(--nav-link-color)
    background-color: var(--nav-bg-color)

  .nav *
    text-decoration: none
    white-space: nowrap

  